# Learning Verification Test
# Quick 2-sheet job to verify outcome recording works end-to-end

name: "learning-verification-test"
description: "Verify learning pipeline records outcomes correctly"

workspace: "./learning-test-workspace"

backend:
  type: claude_cli
  skip_permissions: true
  timeout_seconds: 120
  working_directory: /home/emzi/Projects/mozart-ai-compose

sheet:
  size: 1
  total_items: 2
  start_item: 1

learning:
  enabled: true
  outcome_store_type: json

prompt:
  template: |
    You are running a learning verification test for Mozart.

    {% if sheet_num == 1 %}
    SHEET 1: Create a simple test file.

    Write to: {{ workspace }}/test-output-1.md

    Content:
    ```markdown
    # Learning Test Sheet 1

    This file verifies Mozart's learning pipeline.

    VERIFICATION_COMPLETE: yes
    ```

    {% elif sheet_num == 2 %}
    SHEET 2: Create second test file.

    Write to: {{ workspace }}/test-output-2.md

    Content:
    ```markdown
    # Learning Test Sheet 2

    Second verification file.

    VERIFICATION_COMPLETE: yes
    ```
    {% endif %}

validations:
  - type: file_exists
    path: "{workspace}/test-output-{sheet_num}.md"
    description: "Test output file created"
    stage: 1

  - type: content_contains
    path: "{workspace}/test-output-{sheet_num}.md"
    pattern: "VERIFICATION_COMPLETE: yes"
    description: "Verification marker present"
    stage: 2

state_backend: json
pause_between_sheets_seconds: 2
