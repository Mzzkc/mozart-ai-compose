# Example: Simple Sheet Job
# A minimal Mozart configuration to get started
#
# Usage:
#   mozart run examples/simple-sheet.yaml
#   mozart status simple-sheet
#   mozart resume simple-sheet

name: "simple-sheet"
description: "Minimal example showing core Mozart features"

workspace: "./simple-workspace"

backend:
  type: claude_cli
  skip_permissions: true     # Required for unattended execution
  timeout_seconds: 600       # 10 minutes per sheet

  # Performance optimization - disable MCP servers (default: true)
  # Provides ~2x speedup and prevents resource contention
  disable_mcp: true

  # Output format for structured automation (default: json)
  # Options: json, text, stream-json
  output_format: json

  # Optional: Model selection (omit to use Claude Code's default)
  # cli_model: claude-sonnet-4-20250514

  # Optional: Restrict Claude to specific tools for security
  # allowed_tools: [Read, Grep, Glob]  # Read-only execution

  # Optional: Custom system prompt file
  # system_prompt_file: ./prompts/custom.md

  # Optional: Escape hatch for unsupported CLI flags
  # cli_extra_args: ["--verbose"]

sheet:
  size: 5          # Items per sheet
  total_items: 10  # Total items = 2 sheets

prompt:
  template: |
    Process sheet {{ sheet_num }} of {{ total_sheets }}.
    Items: {{ start_item }} to {{ end_item }}

    Create a file at {{ workspace }}/sheet{{ sheet_num }}.md summarizing your work.

retry:
  max_retries: 2
  base_delay_seconds: 10

validations:
  - type: file_exists
    path: "{workspace}/sheet{sheet_num}.md"
    description: "Sheet output file must exist"

state_backend: json
